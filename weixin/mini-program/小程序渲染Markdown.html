<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Towxml 介绍 | VitePress</title>
    <meta name="description" content="Life is short, Keep it simple.">
    <link rel="stylesheet" href="/x-docs/assets/style.5f411fd9.css">
    <link rel="modulepreload" href="/x-docs/assets/Home.27faf1a0.js">
    <link rel="modulepreload" href="/x-docs/assets/AlgoliaSearchBox.51cd3ea2.js">
    <link rel="modulepreload" href="/x-docs/assets/app.7e0da940.js">
    <link rel="modulepreload" href="/x-docs/assets/weixin_mini-program_小程序渲染Markdown.md.1d4e3626.lean.js">
    <link rel="modulepreload" href="/x-docs/assets/app.7e0da940.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <meta name="twitter:title" content="Towxml 介绍 | VitePress">
    <meta property="og:title" content="Towxml 介绍 | VitePress">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/x-docs/" aria-label="VitePress, back to home" data-v-675d8756 data-v-4a583abe><img class="logo" src="/x-docs/logo.svg" alt="Logo" data-v-4a583abe> VitePress</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/basic/" data-v-b8818f8c>基础 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/framework/index" data-v-b8818f8c>框架 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/project/" data-v-b8818f8c>工程化 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/node/" data-v-b8818f8c>Node <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/weixin/" data-v-b8818f8c>微信相关 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/tool/" data-v-b8818f8c>工具 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/other/" data-v-b8818f8c>其他 <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/SuYxh/x-docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/basic/" data-v-b8818f8c>基础 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/framework/index" data-v-b8818f8c>框架 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/project/" data-v-b8818f8c>工程化 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/node/" data-v-b8818f8c>Node <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/weixin/" data-v-b8818f8c>微信相关 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/tool/" data-v-b8818f8c>工具 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/other/" data-v-b8818f8c>其他 <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/SuYxh/x-docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">微信小程序</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/x-docs/weixin/mini-program/小程序渲染Markdown">小程序渲染Markdown</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#构建twoxml">构建Twoxml</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_1-引入库-app-js">1\. 引入库 /app.js</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_2-在具体页面的配置文件中引入twoxml组件">2\. 在具体页面的配置文件中引入twoxml组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_3-在页面中插入组件">3\. 在页面中插入组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_4-在js中解析内容">4\. 在js中解析内容</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#plus无忧版">plus无忧版</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#基础版">基础版</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/x-docs/weixin/mini-program/小程序解析富文本">小程序解析富文本</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><blockquote><p>最近在做需要展示文章详情的功能，详情打算用Markdown展示，发现微信小程序在支持Markdown方面不是很友好，小蛋我无意中发现一个好用的组件，Towxml，完美支持Markdown,下面就带大家手把手实现Markdown功能</p></blockquote><h1 id="towxml-介绍">Towxml 介绍</h1><p>｜Towxml 官网 <a href="https://github.com/sbfkcel/towxml" title="https://github.com/sbfkcel/towxml" target="_blank" rel="noopener noreferrer">github.com/sbfkcel/tow…</a></p><p>Towxml是一个可将HTML、Markdown转为微信小程序WXML的渲染库，支持以下功能：</p><p><img src="https://img-blog.csdnimg.cn/img_convert/151d3652e4ba35603becfdbbd0c4a99f.webp?x-oss-process=image/format,png" alt="image-20211009115933414"></p><p>使用Towxml可以实现如下的Markdown效果</p><p><img src="https://img-blog.csdnimg.cn/img_convert/3ad3314f60545857da1ad92f1ac9fe90.webp?x-oss-process=image/format,png" alt="image-20211009120021299"></p><h1 id="在小程序中引入twoxml">在小程序中引入Twoxml</h1><h2 id="构建twoxml">构建Twoxml</h2><ul><li>克隆项目到本地</li></ul><div class="language-auto"><pre><code>git clone https://github.com/sbfkcel/towxml.git
复制代码
12
</code></pre></div><ul><li><p>如果没有安装过npm依赖，先安装依赖</p><div class="language-auto"><pre><code>npm install 或 yarn
复制代码
12
</code></pre></div></li><li><p>编辑配置文件towxml/config.js</p><p>根据自己的实际需求保留你需要的功能即可</p></li><li><p>运行 <strong>npm run build</strong> 或 <strong>yarn run build</strong> 即可</p><blockquote><p>构建好后出来的文件在dist目录下，将dist目录复制到小程序项目根目录中并将目录名称改为towxml即可使用</p></blockquote></li></ul><p><img src="https://img-blog.csdnimg.cn/img_convert/e4c556e0abccb067018887d463206bdc.webp?x-oss-process=image/format,png" alt="image-20211009121010136"></p><h1 id="在小程序中使用twoxml">在小程序中使用Twoxml</h1><p>上一步我们已经把towxml文件夹引入到小程序中：</p><p><img src="https://img-blog.csdnimg.cn/img_convert/da84fef7f9ceed71fa0a5ce89d264f34.webp?x-oss-process=image/format,png" alt="image-20211009121918059"></p><h2 id="_1-引入库-app-js">1. 引入库 /app.js</h2><div class="language-auto"><pre><code>// app.js
App({
  // 引入`towxml3.0`解析方法
  towxml:require(&#39;/towxml/index&#39;),
})
复制代码
123456
</code></pre></div><h2 id="_2-在具体页面的配置文件中引入twoxml组件">2. 在具体页面的配置文件中引入twoxml组件</h2><div class="language-auto"><pre><code>// pages/content-detail/content-detail.json
{
  &quot;usingComponents&quot;: {
    &quot;towxml&quot;:&quot;/towxml/towxml&quot;
  }
}
复制代码
1234567
</code></pre></div><h2 id="_3-在页面中插入组件">3. 在页面中插入组件</h2><div class="language-auto"><pre><code>// pages/content-detail/content-detail.wxml
&lt;view class=&quot;content-info&quot;&gt;
  &lt;towxml nodes=&quot;{{article}}&quot;/&gt;
&lt;/view&gt;
复制代码
12345
</code></pre></div><h2 id="_4-在js中解析内容">4. 在js中解析内容</h2><p>解析内容的方式我这边给出了两种版本，一种是plus无忧版，一种是基础版，我先说说plus版</p><h3 id="plus无忧版">plus无忧版</h3><p>正常来说，markdown源数据都应该是从服务端获取，那我们就先封装一个请求方法(我是在App.js中进行封装)</p><div class="language-auto"><pre><code>App({
  // 引入`towxml3.0`解析方法
  towxml:require(&#39;/towxml/index&#39;),
    //声明一个数据请求方法
  getText: (url, callback) =&gt; {
    wx.request({
      url: url,
      header: {
        &#39;content-type&#39;: &#39;application/x-www-form-urlencoded&#39;
      },
      success: (res) =&gt; {
        if (typeof callback === &#39;function&#39;) {
          callback(res);
        };
      }
    });
  }
  })
复制代码
12345678910111213141516171819
</code></pre></div><p>然后在具体页面的js文件中处理解析内容</p><div class="language-auto"><pre><code>// pages/content-detail/content-detail.js
const app = getApp();
Page({
​
  /**
   * 页面的初始数据
   */
  data: {
   article:{}
  },
​
  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    app.getText(&#39;https://www.vvadd.com/wxml_demo/demo.txt?v=2&#39;,res =&gt; {
      let obj = app.towxml(res.data,&#39;markdown&#39;,{
        theme:&#39;light&#39;, //主题 dark 黑色，light白色，不填默认是light
        base:&quot;www.xxx.com&quot;,
        events:{      //为元素绑定的事件方法
          tap:e =&gt; {
            console.log(&#39;tap&#39;,e);
          },
          change:e =&gt; {
            console.log(&#39;todo&#39;,e);
          }
        }
      });
      //更新解析数据
      this.setData({
        article:obj,
      });
    });
  },
})
复制代码
123456789101112131415161718192021222324252627282930313233343536
</code></pre></div><p>这里我是请求一个网址<a href="https://www.vvadd.com/wxml_demo/demo.txt?v=2" title="https://www.vvadd.com/wxml_demo/demo.txt?v=2" target="_blank" rel="noopener noreferrer">www.vvadd.com/wxml_demo/d…</a>，这个网址会给我返回markdown源数据，我们先来看下这个请求地址里面有啥</p><p><img src="https://img-blog.csdnimg.cn/img_convert/0eb9cd0b8891197279b54dfa24650ce2.webp?x-oss-process=image/format,png" alt="image-20211009124700542"></p><p>我们获取到markdown数据后将其进行赋值，然后在页面就能直接展示出来，激动人心的时候到来了，看下最终的效果</p><p><img src="https://img-blog.csdnimg.cn/img_convert/8e304a2ef3e95235a901946a6669e074.webp?x-oss-process=image/format,png" alt="image-20211009125002811"></p><p>效果是不是很完美，完美实现markdown展示</p><h3 id="基础版">基础版</h3><p>说完plus版本再来说说基础版，因为大家可能会有对markdown数据源的自定义处理的操作，所以就再来看看基础版的实现</p><div class="language-auto"><pre><code>// pages/content-detail/content-detail.js
const app = getApp();
Page({
​
  /**
   * 页面的初始数据
   */
  data: {
   article:{}
  },
​
  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    //markdown数据源
      let content= &quot;&lt;h1&gt;h1h1h1h1h1h1&lt;/h1&gt;&lt;h2&gt;h2h2h2h2&lt;/h2&gt;&lt;h3&gt;123456&lt;/h3&gt;&quot;
    let result = app.towxml(content,&#39;markdown&#39;,{
       base:&#39;www.xxx.com&#39;,             // 相对资源的base路径
       theme:&#39;light&#39;,                   // 主题，默认`light`
      events:{                    // 为元素绑定的事件方法
           tap:(e)=&gt;{
               console.log(&#39;h4&#39;,e);
           }
       }
   });
   // 更新解析数据
   this.setData({
      article:result
   });
  },
})
复制代码
123456789101112131415161718192021222324252627282930313233
</code></pre></div><p>基础版就写完了，也很简单，其实和plus版的区别也不大，plus版就是把数据请求进行了一层封装，让我们来看下效果</p><p><img src="https://img-blog.csdnimg.cn/img_convert/658883b4eb423d7c325e065e730249ea.webp?x-oss-process=image/format,png" alt="image-20211009130048088"></p><h1 id="总结">总结</h1><p>使用Towxml来实现markdown其实比较简单，不仅支持了丰富的markdown语法，还支持图表，流程图，数学公式，在真正的开发中，markdown数据源是从服务端进行获取，建议最好是由服务端将markdown数据源进行解析出来，前端获取后直接进行赋值就行，避免造成性能问题</p><blockquote><p>学无止境，我虽然是服务端开发，但对小程序开发的热爱促使我不断的对其学习，如果大家觉得我写的不错，烦请给我点个赞，关注一波，一起交流学习，一个人可以走的很快，一群人会走的更远</p></blockquote></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/SuYxh/x-docs/edit/master/docs/weixin/mini-program/小程序渲染Markdown.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>在 GitHub 上编辑此页 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>上次更新:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/x-docs/weixin/mini-program/小程序解析富文本" data-v-38ede35f><span class="text" data-v-38ede35f>小程序解析富文本</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"e9d94046\",\"basic_index.md\":\"0a384433\",\"components_button.md\":\"2b480dd6\",\"components_modal.md\":\"edad3ad2\",\"components_tabs.md\":\"6784ac5f\",\"components_tag.md\":\"d187ff55\",\"components_vue-script.md\":\"5c62b919\",\"components_vue.md\":\"6d5edb0e\",\"framework_index.md\":\"64d18c3b\",\"framework_tabs.md\":\"5d9999a3\",\"node_index.md\":\"4cb08ce7\",\"node_pm2自动部署node项目.md\":\"621e67b6\",\"node_zx使用教程.md\":\"a5c27f0d\",\"other_index.md\":\"792a39ed\",\"other_电商管理后台api接口文档.md\":\"36cffd48\",\"project_index.md\":\"48c1da81\",\"project_超全面的前端工程化配置指南.md\":\"142b2958\",\"tool_index.md\":\"7c32443d\",\"weixin_index.md\":\"6aaa3c44\",\"basic_css_css选择器nth-child.md\":\"7ad3af57\",\"basic_css_如何解决flex文本溢出问题.md\":\"b02ebd80\",\"basic_css_超出隐藏.md\":\"011acd8f\",\"basic_js_判断苹果手机类型.md\":\"f62b9ff2\",\"framework_vue-component_进度条组件.md\":\"d07d4dab\",\"node_egg_egg实现文件上传.md\":\"1375a5fa\",\"node_sequelize_sequelize简单使用.md\":\"24abdbdc\",\"weixin_mini-program_小程序渲染markdown.md\":\"1d4e3626\",\"weixin_mini-program_小程序解析富文本.md\":\"16457ef3\"}")</script>
    <script type="module" async src="/x-docs/assets/app.7e0da940.js"></script>
  </body>
</html>