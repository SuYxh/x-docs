<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>环境搭建 | VitePress</title>
    <meta name="description" content="Life is short, Keep it simple.">
    <link rel="stylesheet" href="/x-docs/assets/style.5f411fd9.css">
    <link rel="modulepreload" href="/x-docs/assets/Home.d6831b7e.js">
    <link rel="modulepreload" href="/x-docs/assets/AlgoliaSearchBox.10384c81.js">
    <link rel="modulepreload" href="/x-docs/assets/app.69a22d0a.js">
    <link rel="modulepreload" href="/x-docs/assets/framework_vue-article_最详细的 Vue3 + TypeScript 使用教程.md.fbfe484f.lean.js">
    <link rel="modulepreload" href="/x-docs/assets/app.69a22d0a.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <meta name="twitter:title" content="环境搭建 | VitePress">
    <meta property="og:title" content="环境搭建 | VitePress">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/x-docs/" aria-label="VitePress, back to home" data-v-675d8756 data-v-4a583abe><img class="logo" src="/x-docs/logo.svg" alt="Logo" data-v-4a583abe> VitePress</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/basic/" data-v-b8818f8c>基础 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/x-docs/framework/index" data-v-b8818f8c>框架 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/project/" data-v-b8818f8c>工程化 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/node/" data-v-b8818f8c>Node <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/weixin/" data-v-b8818f8c>微信相关 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/tool/" data-v-b8818f8c>工具 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/other/" data-v-b8818f8c>其他 <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/SuYxh/x-docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-15acbf05><!--[--><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/basic/" data-v-b8818f8c>基础 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item active" href="/x-docs/framework/index" data-v-b8818f8c>框架 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/project/" data-v-b8818f8c>工程化 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/node/" data-v-b8818f8c>Node <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/weixin/" data-v-b8818f8c>微信相关 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/tool/" data-v-b8818f8c>工具 <!----></a></div></div><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item" href="/x-docs/other/" data-v-b8818f8c>其他 <!----></a></div></div><!--]--><!----><div class="item" data-v-15acbf05><div class="nav-link" data-v-15acbf05 data-v-b8818f8c><a class="item isExternal" href="https://github.com/SuYxh/x-docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Vue组件</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/x-docs/framework/vue-component/进度条组件">进度条组件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/x-docs/framework/tabs">Tabs 标签页</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vue文章</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/x-docs/framework/vue-article/最详细的 Vue3 + TypeScript 使用教程">最详细的 Vue3 + TypeScript 使用教程</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#环境搭建">环境搭建</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ref">ref()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#类型定义">类型定义</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#为-ref-标注类型">为 ref() 标注类型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#三种方式推荐">三种方式推荐</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reactive">reactive()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#类型定义-1">类型定义</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#为-reactive-标注类型">为 reactive() 标注类型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#两种方式推荐">两种方式推荐</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#computed">computed ()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#类型定义-2">类型定义</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#为-computed-标注类型">为 computed() 标注类型</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#两种方式推荐-1">两种方式推荐</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#defineprops">defineProps()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#为-defineprops-标注类型">为 defineProps() 标注类型</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#defineemits">defineEmits()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#为-defineemits-标注类型">为 defineEmits() 标注类型</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#defineexpose">defineExpose()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#为-defineexpose-标注类型">为 defineExpose() 标注类型</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#provide">provide()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#类型定义-3">类型定义</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#为-provide-标注类型">为 provide() 标注类型</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#inject">inject()</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#类型定义-4">类型定义</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#为-inject-标注类型">为 inject() 标注类型</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#模板-ref">模板 ref</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#组件-ref">组件 ref</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#事件处理器">事件处理器</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#写在最后">写在最后</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/x-docs/framework/vue-article/Vue项目性能优化实战总结">Vue项目性能优化实战总结</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>点击下方“前端开发爱好者”，选择“设为星标”</p><p>第一时间关注技术干货！</p><p><img src="https://qn.huat.xyz/mac/20220725204331.png" alt=""></p><p><strong>前端开发爱好者</strong></p><p>分享 web 前端相关技术文章、工具资源、精选课程、视频教程资源、热点资讯</p><p>60篇原创内容</p><p>公众号</p><blockquote><p>哈喽,大家好 我是<code>xy</code>👨🏻‍💻。最近技术栈刚刚由之前的 <code>React</code> 转向 <code>Vue3</code>了，由于之前多多少少也接触过 <code>Vue</code>，所以这次只用了一个上午的时间就上手 <code>Vue3</code> 了，如果大家有关于<code>vue</code>或者<code>react</code>上的问题，欢迎来滴滴我，一起交流学习 💪</p></blockquote><p>至于技术栈为什么由 <code>react</code> 转向 <code>vue3</code>，也是因为今年换了新工作，公司技术栈以<code>vue3</code>为主，刚好前段时间又接手了一个项目，就直接采用 <code>Vue3</code> <code>script setup</code> <code>typescript</code> 开发，于是今天就想给大家分享下 <code>script setup</code> 结合 <code>typescript</code> 使用的一些技巧，如果这些技巧能够帮助到你，记得给我点个赞呦 👍</p><h2 id="环境搭建">环境搭建</h2><p>环境搭建这里就不详细介绍了，可以直接使用官方的方式创建</p><div class="language-auto"><pre><code>npm init vue@latest
</code></pre></div><p>这一指令将会安装并执行 <code>create-vue</code>，它是 <code>Vue</code> 官方的项目脚手架工具。你将会看到一些诸如 <code>TypeScript</code> 和<code>测试</code>支持之类的可选功能提示：</p><div class="language-auto"><pre><code>✔ Project name: … &lt;your-project-name&gt;
✔ Add TypeScript? … No / Yes
✔ Add JSX Support? … No / Yes
✔ Add Vue Router for Single Page Application development? … No / Yes
✔ Add Pinia for state management? … No / Yes
✔ Add Vitest for Unit testing? … No / Yes
✔ Add Cypress for both Unit and End-to-End testing? … No / Yes
✔ Add ESLint for code quality? … No / Yes
✔ Add Prettier for code formatting? … No / Yes

Scaffolding project in ./&lt;your-project-name&gt;...
Done.
</code></pre></div><p>如果不确定是否要开启某个功能，你可以直接按下回车键选择 <code>No</code>。在项目被创建后，通过以下步骤安装依赖并启动开发服务器：</p><div class="language-auto"><pre><code>cd &lt;your-project-name&gt;
npm install
npm run dev
</code></pre></div><p>想看更多的<code>详细配置</code>的同学，可以移步到我之前的一篇文章中：<a href="http://mp.weixin.qq.com/s?__biz=MzUzNTk3MjE2Ng==&amp;mid=2247490197&amp;idx=1&amp;sn=df6b58af594299ffda15483df3c082c0&amp;chksm=fafc0abccd8b83aa2fb4371aa21dc4f1f0719697b123991b562709cf1920bc79f5452512f289&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer"><img src="https://qn.huat.xyz/mac/20220725204336.jpeg" alt="图片"></a></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzUzNTk3MjE2Ng==&amp;mid=2247490197&amp;idx=1&amp;sn=df6b58af594299ffda15483df3c082c0&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer"></a></p><p>这里就不做过多的讲解了，这篇文章的重点还是在 <code>script setup</code> <code>typescript</code> 结合使用上</p><h2 id="ref">ref()</h2><p><code>ref()</code>接受一个内部值，返回一个响应式的、可更改的 <code>ref</code> 对象，此对象只有一个指向其内部值的 <code>property .value</code>。</p><h3 id="类型定义">类型定义</h3><div class="language-auto"><pre><code>function ref&lt;T&gt;(value: T): Ref&lt;UnwrapRef&lt;T&gt;&gt;
interface Ref&lt;T&gt; {
  value: T
}
</code></pre></div><h3 id="为-ref-标注类型">为 ref() 标注类型</h3><p><code>ref()</code> 标注类型有三种方式：</p><ol><li>通过泛型参数的形式来给 <code>ref()</code>增加类型</li></ol><div class="language-auto"><pre><code>import { ref } from &#39;vue&#39;

const initCode = ref&lt;string | number&gt;(&#39;200&#39;)
</code></pre></div><ol start="2"><li>如果是遇到复杂点的类型，可以自定义 <code>interface</code> 然后泛型参数的形式传入</li></ol><div class="language-auto"><pre><code>import { ref } from &#39;vue&#39;

interface User {
  name: string
  age: string | number
}

const user = ref&lt;User&gt;({
  name:&#39;前端开发爱好者&#39;,
  age: 20
})
</code></pre></div><ol start="3"><li>通过使用 <code>Ref</code> 这个类型为 <code>ref</code> 内的值指定一个更复杂的类型</li></ol><div class="language-auto"><pre><code>import { ref } from &#39;vue&#39;
import type { Ref } from &#39;vue&#39;

const initCode: Ref&lt;string | number&gt; = ref(&#39;200&#39;)
</code></pre></div><h3 id="三种方式推荐">三种方式推荐</h3><p>比较推荐使用<code>前两种</code>方式，前两种方式其实都是以<code>泛型</code>的形式来标注类型的</p><p>第三种方式需要额外的引入：</p><div class="language-auto"><pre><code>import type { Ref } from &#39;vue&#39;
</code></pre></div><p>所以不是很推荐(本着能少写一行是一行原则)</p><h2 id="reactive">reactive()</h2><p><code>reactive()</code> 返回一个对象的响应式代理。</p><h3 id="类型定义-1">类型定义</h3><div class="language-auto"><pre><code>function reactive&lt;T extends object&gt;(target: T): UnwrapNestedRefs&lt;T&gt;
</code></pre></div><h3 id="为-reactive-标注类型">为 reactive() 标注类型</h3><p><code>reactive()</code>标注类型有两种方式：</p><ol><li>直接给声明的变量添加类型</li></ol><div class="language-auto"><pre><code>import { reactive } from &#39;vue&#39;

interface User {
  name: string
  age: string | number
}

const user:User = reactive({
  name:&quot;前端开发爱好者&quot;,
  age:&#39;20&#39;
})
</code></pre></div><ol start="2"><li>通过泛型参数的形式来给 <code>reactive()</code>增加类型</li></ol><div class="language-auto"><pre><code>import { reactive } from &#39;vue&#39;

interface User {
  name: string
  age: string | number
}

const user = reactive&lt;User&gt;({
  name:&quot;前端开发爱好者&quot;,
  age:&#39;20&#39;
})
</code></pre></div><h3 id="两种方式推荐">两种方式推荐</h3><p><code>不推荐</code>使用 <code>reactive()</code> 的泛型参数,因为处理了深层次 ref 解包的返回值与泛型参数的类型不同。<code>推荐直接给声明的变量添加类型</code>。</p><h2 id="computed">computed ()</h2><p>接受一个 <code>getter</code> 函数，返回一个只读的响应式 <code>ref</code> 对象，即 <code>getter</code> 函数的返回值。它也可以接受一个带有 <code>get</code> 和 <code>set</code> 函数的对象来创建一个可写的 <code>ref</code> 对象。</p><h3 id="类型定义-2">类型定义</h3><div class="language-auto"><pre><code>// 只读
function computed&lt;T&gt;(
  getter: () =&gt; T,
  debuggerOptions?: DebuggerOptions
): Readonly&lt;Ref&lt;Readonly&lt;T&gt;&gt;&gt;

// 可写的
function computed&lt;T&gt;(
  options: {
    get: () =&gt; T
    set: (value: T) =&gt; void
  },
  debuggerOptions?: DebuggerOptions
): Ref&lt;T&gt;
</code></pre></div><h3 id="为-computed-标注类型">为 computed() 标注类型</h3><p><code>computed()</code>标注类型有两种方式：</p><ol><li>从其计算函数的返回值上推导出类型</li></ol><div class="language-auto"><pre><code>import { ref, computed } from &#39;vue&#39;

const count = ref&lt;number&gt;(0)

// 推导得到的类型：ComputedRef&lt;string&gt;
const user = computed(() =&gt; count.value + &#39;前端开发爱好者&#39;)
</code></pre></div><ol start="2"><li>通过泛型参数显式指定 <code>computed()</code> 类型</li></ol><div class="language-auto"><pre><code>const user = computed&lt;string&gt;(() =&gt; {
  // 若返回值不是 string 类型则会报错
  return &#39;前端开发爱好者&#39;
})
</code></pre></div><h3 id="两种方式推荐-1">两种方式推荐</h3><p>自动推导类型虽然简单快捷，但是还是希望<code>手动</code>的去<code>指定</code>其类型，这样更加利于代码的可维护性，所以这里推荐大家使用通过泛型参数显式指定 <code>computed()</code> 类型</p><h2 id="defineprops">defineProps()</h2><p>为了在声明 <code>props</code> 选项时获得完整的类型推断支持，我们可以使用 <code>defineProps</code> API，它将自动地在 <code>script setup</code> 中使用</p><h3 id="为-defineprops-标注类型">为 defineProps() 标注类型</h3><ol><li>从它的参数中推导类型:</li></ol><div class="language-auto"><pre><code>const props = defineProps({
  name: { type: String, required: true },
  age: Number
})
</code></pre></div><ol start="2"><li>通过泛型参数来定义 <code>props</code> 的类型</li></ol><div class="language-auto"><pre><code>const props = defineProps&lt;{
  name: string
  age?: number
}&gt;()
</code></pre></div><p>当然了,我们也可以把以上的泛型参数定义成一个单独的 <code>interface</code></p><div class="language-auto"><pre><code>interface Props {
  name: string
  age?: number
}

const props = defineProps&lt;Props&gt;()
</code></pre></div><blockquote><p>以上的两种方式虽然都可以很方便的<code>标注类型</code>, 但是失去了对 <code>props</code> 定义默认值的能力</p></blockquote><p>目前官方也给出了解决方案,但是目前这个方案还处于实验性,并且需要<code>显式地选择开启</code>。</p><div class="language-auto"><pre><code>// vite.config.js
export default {
  plugins: [
    vue({
      reactivityTransform: true
    })
  ]
}
</code></pre></div><p>通过对 <code>defineProps()</code> 的响应性解构来添加默认值:</p><div class="language-auto"><pre><code>&lt;script setup lang=&quot;ts&quot;&gt;
interface Props {
  name: string
  age?: number
}

const { name = &#39;前端开发爱好者&#39;, age = 100 } = defineProps&lt;Props&gt;()
&lt;/script&gt;
</code></pre></div><h2 id="defineemits">defineEmits()</h2><p>为了在声明 <code>emits</code> 选项时获得完整的类型推断支持，我们可以使用 <code>defineEmits</code> API，它将自动地在 <code>script setup</code> 中使用</p><h3 id="为-defineemits-标注类型">为 defineEmits() 标注类型</h3><p><code>defineEmits()</code> 标注类型直接推荐<code>泛型</code>形式</p><div class="language-auto"><pre><code>import type { GlobalTheme } from &#39;naive-ui&#39;

const emit = defineEmits&lt;{
  (e: &#39;setThemeColor&#39;, val: GlobalTheme): void
}&gt;()
</code></pre></div><p>虽然官方还推荐了<code>运行时</code>自动推导的一种形式,但是本人不是很推荐</p><h2 id="defineexpose">defineExpose()</h2><p><code>defineExpose()</code> 编译器宏来显式指定在 <code>script setup</code> 组件中要暴露出去的 <code>property</code>,使得父组件通过<code>模板ref</code>的方式获取到当前组件的实例</p><h3 id="为-defineexpose-标注类型">为 defineExpose() 标注类型</h3><p><code>defineExpose()</code> 类型推导直接使用参数类型自动推导即可</p><div class="language-auto"><pre><code>&lt;script setup&gt;
import { ref } from &#39;vue&#39;

const name = ref&lt;string&gt;(&#39;前端开发爱好者&#39;)

defineExpose({
  name
})
</code></pre></div><h2 id="provide">provide()</h2><p><code>provide()</code>供给一个值，可以被后代组件注入</p><h3 id="类型定义-3">类型定义</h3><div class="language-auto"><pre><code>function provide&lt;T&gt;(key: InjectionKey&lt;T&gt; | string, value: T): void
</code></pre></div><h3 id="为-provide-标注类型">为 provide() 标注类型</h3><p>为 <code>provide()</code> 标注类型, Vue 提供了一个 <code>InjectionKey</code> 接口，它是一个继承自 <code>Symbol</code> 的泛型类型，可以用来在提供者和消费者之间同步注入值的类型</p><div class="language-auto"><pre><code>import type { InjectionKey } from &#39;vue&#39;

// 建议声明 key (name) 放到公共的文件中
// 这样就可以在 inject 的时候直接导入使用
const name = Symbol() as InjectionKey&lt;string&gt;

provide(name, &#39;前端开发爱好者&#39;) // 若提供的是非字符串值会导致错误
</code></pre></div><p>以上方式是通过定义 key 的类型来标注类型的,还有一种方式直接 <code>key</code> 采用<code>字符串</code>的形式添加</p><div class="language-auto"><pre><code>provide(&#39;name&#39;, &#39;前端开发爱好者&#39;)
</code></pre></div><h2 id="inject">inject()</h2><p><code>inject()</code>注入一个由祖先组件或整个应用供给的值</p><h3 id="类型定义-4">类型定义</h3><div class="language-auto"><pre><code>// 没有默认值
function inject&lt;T&gt;(key: InjectionKey&lt;T&gt; | string): T | undefined

// 带有默认值
function inject&lt;T&gt;(key: InjectionKey&lt;T&gt; | string, defaultValue: T): T

// 使用工厂函数
function inject&lt;T&gt;(
  key: InjectionKey&lt;T&gt; | string,
  defaultValue: () =&gt; T,
  treatDefaultAsFactory: true
): T
</code></pre></div><h3 id="为-inject-标注类型">为 inject() 标注类型</h3><p><code>provide()</code> 的 <code>key</code> 的类型是声明式提供的话(provide()类型标注的第一种形式)</p><p><code>inject()</code> 可以直接导入声明的 <code>key</code> 来获取父级组件提供的值</p><div class="language-auto"><pre><code>// 由外部导入
const name = Symbol() as InjectionKey&lt;string&gt;

const injectName = inject(name)
</code></pre></div><p>如果 <code>provide()</code> 的 <code>key</code> 直接使用的<code>字符串</code>形式添加的, 需要通过泛型参数声明</p><div class="language-auto"><pre><code>const injectName = inject&lt;string&gt;(&#39;name&#39;)
</code></pre></div><h2 id="模板-ref">模板 ref</h2><p>模板 <code>ref</code> 需要通过一个显式指定的<code>泛型参数</code>和一个<code>初始值 null</code> 来创建：</p><div class="language-auto"><pre><code>&lt;img ref=&quot;el&quot; class=&quot;logo&quot; :src=&quot;Logo&quot; alt=&quot;&quot; /&gt;

const el = ref&lt;HTMLImageElement | null&gt;(null)
</code></pre></div><h2 id="组件-ref">组件 ref</h2><p>有时，你可能需要为一个子组件添加一个模板 ref，以便调用它公开的方法</p><div class="language-auto"><pre><code>&lt;!-- Child.vue --&gt;
&lt;script setup lang=&quot;ts&quot;&gt;
const handleLog = () =&gt; console.log(&#39;前端开发爱好者&#39;)

defineExpose({
  open
})
&lt;/script&gt;
</code></pre></div><p>为了获取 <code>MyModal</code> 的类型，我们首先需要通过 <code>typeof</code> 得到其类型，再使用 <code>TypeScript</code> 内置的 <code>InstanceType</code> 工具类型来获取其实例类型：</p><div class="language-auto"><pre><code>&lt;!-- parent.vue --&gt;
&lt;script setup lang=&quot;ts&quot;&gt;
import Child from &#39;./Child.vue&#39;

// 为子组件 ref 声明类型
const child = ref&lt;InstanceType&lt;typeof Child&gt; | null&gt;(null)

// 调用子组件中的方法
const getChildHandleLog = () =&gt; {
  child.value?.handleLog()
}
&lt;/script&gt;
</code></pre></div><h2 id="事件处理器">事件处理器</h2><p>原生的 DOM 事件标注类型</p><div class="language-auto"><pre><code>&lt;template&gt;
  &lt;input type=&quot;text&quot; @change=&quot;handleChange&quot; /&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
function handleChange(event: Event) {
  console.log((event.target as HTMLInputElement).value)
}
&lt;/script&gt;
</code></pre></div><h2 id="写在最后">写在最后</h2><blockquote><p><code>公众号</code>：<code>前端开发爱好者</code> 专注分享 <code>web</code> 前端相关<code>技术文章</code>、<code>视频教程</code>资源、热点资讯等，如果喜欢我的分享，给 🐟🐟 点一个<code>赞</code> 👍 或者 ➕<code>关注</code> 都是对我最大的支持。</p></blockquote><p>关注公众号后，在首页：</p><ul><li><p>回复<code>面试题</code>，获取最新大厂面试资料。</p></li><li><p>回复<code>简历</code>，获取 3200 套 简历模板。</p></li><li><p>回复<code>React实战</code>，获取 React 最新实战教程。</p></li><li><p>回复<code>Vue实战</code>，获取 Vue 最新实战教程。</p></li><li><p>回复<code>ts</code>，获取 TypeScript 精讲课程。</p></li><li><p>回复<code>vite</code>，获取 精讲课程。</p></li><li><p>回复<code>uniapp</code>，获取 uniapp 精讲课程。</p></li><li><p>回复<code>js书籍</code>，获取 js 进阶 必看书籍。</p></li><li><p>回复<code>Node</code>，获取 Nodejs+koa2 实战教程。</p></li><li><p>回复<code>数据结构算法</code>，获取数据结构算法教程。</p></li><li><p>回复<code>架构师</code>，获取 架构师学习资源教程。</p></li><li><p>更多教程资源应有尽有，欢迎<code>关注获取</code></p></li></ul></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/SuYxh/x-docs/edit/master/docs/framework/vue-article/最详细的 Vue3 + TypeScript 使用教程.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>在 GitHub 上编辑此页 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>上次更新:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/x-docs/framework/tabs" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Tabs 标签页</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/x-docs/framework/vue-article/Vue项目性能优化实战总结" data-v-38ede35f><span class="text" data-v-38ede35f>Vue项目性能优化实战总结</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"88d684d6\",\"basic_index.md\":\"2bef394e\",\"components_button.md\":\"c28d6c33\",\"components_modal.md\":\"2070682b\",\"components_tabs.md\":\"b60ab786\",\"components_tag.md\":\"0633e08a\",\"components_vue-script.md\":\"56b85055\",\"components_vue.md\":\"a6b39c0a\",\"framework_index.md\":\"16d02d28\",\"framework_tabs.md\":\"56708896\",\"node_index.md\":\"31c6c4eb\",\"node_pm2自动部署node项目.md\":\"94f06997\",\"node_zx使用教程.md\":\"6e872262\",\"node_前端项目部署记.md\":\"a4e18fc6\",\"other_index.md\":\"a88b1730\",\"other_吴军：功夫没下够，用什么方法都是在浪费时间.md\":\"0ab08b69\",\"other_电商管理后台api接口文档.md\":\"89d0e22f\",\"project_index.md\":\"f43b3bfa\",\"project_从0开始使用pnpm构建一个monorepo方式管理的demo.md\":\"f4fb26b5\",\"project_超全面的前端工程化配置指南.md\":\"1a22a054\",\"tool_index.md\":\"d585f77a\",\"weixin_index.md\":\"5d1637bc\",\"basic_css_css选择器nth-child.md\":\"b26d7ff2\",\"basic_css_如何解决flex文本溢出问题.md\":\"b667f671\",\"basic_css_超出隐藏.md\":\"b26d2960\",\"basic_js_javascript 循环遍历大全.md\":\"bf7f5360\",\"basic_js_reduce使用实例.md\":\"ede2bde2\",\"basic_js_判断苹果手机类型.md\":\"f42b95d1\",\"basic_js_常用的数组方法.md\":\"4e0180a8\",\"basic_js_手写promise.md\":\"eb10704b\",\"framework_vue-article_vue项目性能优化实战总结.md\":\"77e32dbc\",\"framework_vue-article_最详细的 vue3 + typescript 使用教程.md\":\"fbfe484f\",\"framework_vue-component_进度条组件.md\":\"c1111609\",\"node_egg_egg实现文件上传.md\":\"02d022c4\",\"node_sequelize_sequelize简单使用.md\":\"d77e2729\",\"weixin_mini-program_小程序渲染markdown.md\":\"d49797ea\",\"weixin_mini-program_小程序解析富文本.md\":\"ef2cac99\"}")</script>
    <script type="module" async src="/x-docs/assets/app.69a22d0a.js"></script>
  </body>
</html>