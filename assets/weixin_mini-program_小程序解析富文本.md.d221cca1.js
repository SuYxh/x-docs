import{o as n,c as a,e as s}from"./app.8b525408.js";const t='{"title":"一：使用小程序内置标签rich-text","description":"","frontmatter":{},"headers":[{"level":2,"title":"一：使用小程序内置标签rich-text","slug":"一：使用小程序内置标签rich-text"},{"level":2,"title":"二：使用wxParse插件解析html","slug":"二：使用wxparse插件解析html"}],"relativePath":"weixin/mini-program/小程序解析富文本.md","lastUpdated":1658753104220}',p={},o=[s('<p>微信小程序解析富文本html大概有两种方式（我发现的）。</p><p>两种方法，各有各的优缺点。</p><h2 id="一：使用小程序内置标签rich-text">一：使用小程序内置标签rich-text</h2><p>这个标签解析的富文本会保留你在pc端编辑的样式，也就是说，你在pc端编辑的是什么样子，小程序端显示的也是什么样子。</p><p>示例：</p><p>Html</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-section-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>通过HTML String渲染<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span><span class="token punctuation">&gt;</span></span>{{htmlSnip}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 30rpx 0</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>renderHtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>渲染HTML<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{renderedByHtml}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rich-text</span> <span class="token attr-name">nodes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{htmlSnip}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rich-text</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n \n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-section-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>通过节点渲染<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span><span class="token punctuation">&gt;</span></span>{{nodeSnip}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 30rpx 0</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>renderNode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>渲染Node<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{renderedByNode}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rich-text</span> <span class="token attr-name">nodes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{nodes}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rich-text</span><span class="token punctuation">&gt;</span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n \n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n1234567891011121314151617181920212223242526\n</code></pre></div><p>Javascript：</p><div class="language-javascript"><pre><code><span class="token keyword">const</span> htmlSnip <span class="token operator">=</span>\n<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;\n  &lt;h1&gt;Title&lt;/h1&gt;\n  &lt;p&gt;\n    Life is&amp;nbsp;&lt;i&gt;like&lt;/i&gt;&amp;nbsp;a box of\n    &lt;b&gt;&amp;nbsp;chocolates&lt;/b&gt;.\n  &lt;/p&gt;\n&lt;/div&gt;\n</span><span class="token template-punctuation string">`</span></span>\n \n<span class="token keyword">const</span> nodeSnip <span class="token operator">=</span>\n<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Page({\n  data: {\n    nodes: [{\n      name: &#39;div&#39;,\n      attrs: {\n        class: &#39;div_class&#39;,\n        style: &#39;line-height: 60px; color: red;&#39;\n      },\n      children: [{\n        type: &#39;text&#39;,\n        text: &#39;You never know what you&#39;re gonna get.&#39;\n      }]\n    }]\n  }\n})\n</span><span class="token template-punctuation string">`</span></span>\n \n<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function">onShareAppMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n      title<span class="token operator">:</span> <span class="token string">&#39;rich-text&#39;</span><span class="token punctuation">,</span>\n      path<span class="token operator">:</span> <span class="token string">&#39;page/component/pages/rich-text/rich-text&#39;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n \n  data<span class="token operator">:</span> <span class="token punctuation">{</span>\n    htmlSnip<span class="token punctuation">,</span>\n    nodeSnip<span class="token punctuation">,</span>\n    renderedByHtml<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    renderedByNode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n    nodes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>\n      name<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n      attrs<span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;div_class&#39;</span><span class="token punctuation">,</span>\n        style<span class="token operator">:</span> <span class="token string">&#39;line-height: 60px; color: #1AAD19;&#39;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>\n        type<span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>\n        text<span class="token operator">:</span> <span class="token string">&#39;You never know what you\\&#39;re gonna get.&#39;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">]</span>\n    <span class="token punctuation">}</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function">renderHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      renderedByHtml<span class="token operator">:</span> <span class="token boolean">true</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function">renderNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      renderedByNode<span class="token operator">:</span> <span class="token boolean">true</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function">enterCode</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      htmlSnip<span class="token operator">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token number">12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970</span>\n</code></pre></div><p>上边这是微信小程序官方文档给出的示例，更多使用方法，请参照：</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html" target="_blank" rel="noopener noreferrer">https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html</a></p><p>但是rich-text标签有一个问题就是，其无法解析video标签。</p><p>因此我就找了第二个解析富文本的方法。</p><h2 id="二：使用wxparse插件解析html">二：使用wxParse插件解析html</h2><p>wxParse的优点是可以解析video标签，但是他不会保留原有的样式。</p><p>这个相关的文件会在文末提供下载，所以别急，请慢慢看下去。</p><p>文件列表：</p><p><img src="https://img-blog.csdnimg.cn/img_convert/af35ecfe36b3084b3bdaf9a46ef2e511.png#pic_center" alt="111.png"></p><p>使用示例：</p><p>在html中引入：</p><div class="language-javascript"><pre><code><span class="token operator">&lt;</span><span class="token keyword">import</span> src<span class="token operator">=</span><span class="token string">&quot;../../../wxParse/wxParse.wxml&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>\n<span class="token number">1</span>\n</code></pre></div><p>在javascript中引入：</p><div class="language-javascript"><pre><code><span class="token keyword">var</span> WxParse <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../../../wxParse/html2json.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token number">1</span>\n</code></pre></div><p>在css中引入：</p><div class="language-css"><pre><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;./wxParse/wxParse.wxss&quot;</span><span class="token punctuation">;</span></span>\n1\n</code></pre></div><p>使用方法：</p><p>Javascript</p><div class="language-javascript"><pre><code><span class="token comment">// pages/about/about.js</span>\n <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">/*** WxParse.wxParse(bindName , type, data, target,imagePadding)\n* 1.bindName绑定的数据名(必填)\n* 2.type可以为html或者md(必填)\n* 3.data为传入的具体数据(必填)\n* 4.target为Page对象,一般为this(必填)\n* 5.imagePadding为当图片自适应是左右的单一padding(默认为0,可选)*/</span>\n<span class="token keyword">var</span> temp <span class="token operator">=</span> WxParse<span class="token punctuation">.</span><span class="token function">wxParse</span><span class="token punctuation">(</span><span class="token string">&#39;article&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;html&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> that<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token number">12345678910</span>\n</code></pre></div><p>Wxml:</p><div class="language-html"><pre><code><span class="token comment">&lt;!--pages/about/about.wxml--&gt;</span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../wxParse/wxParse.wxml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>\n <span class="token comment">&lt;!-- 这一块是富文本 显示的内容区 --&gt;</span>\n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wxParse<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{wxParseData:article.nodes}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>\n12345\n</code></pre></div><p>以上大概就是微信小程序中两种解析富文本html的方法</p><p>有好的建议，请在下方输入你的评论。</p><p>欢迎访问个人博客<br><a href="https://guanchao.site" target="_blank" rel="noopener noreferrer">https://guanchao.site</a></p><p>欢迎访问小程序：</p><p><img src="https://img-blog.csdnimg.cn/20210209085646184.png#pic_center" alt="在这里插入图片描述"></p>',35)];p.render=function(s,t,p,e,c,l){return n(),a("div",null,o)};export default p;export{t as __pageData};
